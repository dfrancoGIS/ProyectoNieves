<mat-sidenav-container class="example-container">
    <mat-sidenav #sidenav [mode]="'over'" [position]="'end'"></mat-sidenav>

    <mat-sidenav-content>
        <div class="referencia">
            <p>Cuadrillas / Gestión de cuadrillas</p>
        </div>

        <!-- Panel Superior: Lista de cuadrillas -->
        <div class="panel-superior">
            <mat-card class="cuadrillas-card">
                <div class="cuadrillas-title">Cuadrillas Disponibles</div>
                <div class="cuadrillas-container">
                    <div *ngFor="let cuadrilla of cuadrillas" class="cuadrilla">
                        <div class="cuadrilla-header">{{ cuadrilla.nombre }}</div>
                        <ul class="cuadrilla-list">
                            <li *ngFor="let equipo of cuadrilla.equipos" class="equipo rojo" (click)="seleccionarEquipo(equipo)">
                                {{ equipo.nombre }}
                            </li>
                        </ul>
                    </div>
                </div>
            </mat-card>
        </div>

        <!-- Panel Central: Gestión de Equipos y Turnos -->
        <mat-tab-group>
            <!-- Pestaña: Gestión de Equipos -->
            <mat-tab label="Gestión de Equipos">
                <div class="fila1">
                    <mat-form-field appearance="outline" class="foe large-select">
                        <mat-label>Equipos disponibles</mat-label>
                        <mat-select [(value)]="selectedEquipo" (selectionChange)="seleccionarEquipo($event.value)">
                            <mat-option *ngFor="let equipo of equiposDisponibles" [value]="equipo">
                                {{ equipo.nombre }}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                                    <!-- Botones de acción -->
                <div class="fila8">
                    <div class="botones">
                        <ng-container *ngIf="!modoAlta && !modoEdicion">
                            <button mat-raised-button color="accent" (click)="iniciarAltaEquipo()">
                                <mat-icon>add</mat-icon> Alta cuadrilla
                            </button>
                            <button mat-raised-button color="primary" (click)="iniciarEdicionEquipo()">
                                <mat-icon>edit</mat-icon> Modificar
                            </button>
                            <button mat-raised-button color="warn" (click)="eliminarEquipo()">
                                <mat-icon>delete</mat-icon> Eliminar
                            </button>
                        </ng-container>

                        <ng-container *ngIf="modoAlta || modoEdicion">
                            <button mat-raised-button color="success" (click)="confirmarAccion()">
                                <mat-icon>check</mat-icon> Confirmar
                            </button>
                            <button mat-raised-button color="warn" (click)="cancelarAccion()">
                                <mat-icon>close</mat-icon> Cancelar
                            </button>
                        </ng-container>
                    </div>
                </div>
                </div>
                

                <div class="fila2">
                    <mat-form-field appearance="outline">
                        <mat-label>Nombre equipo</mat-label>
                        <input matInput [(ngModel)]="equipoActual.nombre" readonly>
                    </mat-form-field>
                    <mat-form-field appearance="outline">
                        <mat-label>Cuadrilla</mat-label>
                        <input matInput [(ngModel)]="equipoActual.cuadrilla" readonly>
                    </mat-form-field>
                    <mat-form-field appearance="outline">
                        <mat-label>Localidad</mat-label>
                        <input matInput [(ngModel)]="equipoActual.localidad" readonly>
                    </mat-form-field>
                    <mat-checkbox [(ngModel)]="equipoActual.responsable" disabled>Responsable</mat-checkbox>
                </div>

                <div class="fila6">
                    <mat-form-field appearance="outline">
                        <mat-label>Vehículo</mat-label>
                        <input matInput [(ngModel)]="equipoActual.vehiculo" readonly>
                    </mat-form-field>
                </div>

                <div class="fila7">
                    <div class="tabla-container">
                        <mat-card-title>Carreteras a tratar</mat-card-title>
                        <table mat-table [dataSource]="carreteras" class="mat-elevation-z8">
                            <ng-container matColumnDef="nombre">
                                <th mat-header-cell *matHeaderCellDef>Carretera</th>
                                <td mat-cell *matCellDef="let row">{{ row.nombre }}</td>
                            </ng-container>
                
                            <tr mat-header-row *matHeaderRowDef="['nombre']"></tr>
                            <tr mat-row *matRowDef="let row; columns: ['nombre'];"></tr>
                        </table>
                    </div>
                </div>
            </mat-tab>

            <!-- Pestaña: Gestión de Turnos -->
            <mat-tab label="Gestión de Turnos">
                <!-- Selección de equipo -->
                <div class="fila1">
                    <mat-form-field appearance="outline" class="foe large-select">
                        <mat-label>Equipos disponibles</mat-label>
                        <mat-select [(value)]="selectedEquipo" (selectionChange)="seleccionarEquipo($event.value)">
                            <mat-option *ngFor="let equipo of equiposDisponibles" [value]="equipo">
                                {{ equipo.nombre }}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                    <div class="botones">
                        <ng-container *ngIf="!modoAlta && !modoEdicion">
                            <button mat-raised-button color="accent" (click)="iniciarAltaTurno()">
                                <mat-icon>add</mat-icon> Alta turno
                            </button>
                        </ng-container>
                   <!-- Si estamos en modo alta o modo edición, mostramos Confirmar y Cancelar -->
                        <ng-container *ngIf="modoAlta || modoEdicion">
                            <button mat-raised-button color="success" (click)="confirmarAccion()">
                                <mat-icon>check</mat-icon> Confirmar
                            </button>
                            <button mat-raised-button color="warn" (click)="cancelarAccion()">
                                <mat-icon>close</mat-icon> Cancelar
                            </button>
                        </ng-container>
                    </div>
                </div>
            
                <!-- Tabla de turnos -->
                <div class="fila7">
                    <div class="tabla-container">
                        <table mat-table [dataSource]="turnos" class="mat-elevation-z8">
                            
                            <!-- Fecha Inicio -->
                            <ng-container matColumnDef="fechaInicio" >
                                <th mat-header-cell *matHeaderCellDef style="background-color: lightgrey;"> Fecha Inicio </th>
                                <td mat-cell *matCellDef="let row"> {{ row.fechaInicio }} </td>
                            </ng-container>
            
                            <!-- Hora Inicio -->
                            <ng-container matColumnDef="horaInicio">
                                <th mat-header-cell *matHeaderCellDef style="background-color: lightgrey;"> Hora Inicio </th>
                                <td mat-cell *matCellDef="let row"> {{ row.horaInicio }} </td>
                            </ng-container>
            
                            <!-- Fecha Fin -->
                            <ng-container matColumnDef="fechaFin">
                                <th mat-header-cell *matHeaderCellDef style="background-color: lightgrey;"> Fecha Fin </th>
                                <td mat-cell *matCellDef="let row"> {{ row.fechaFin }} </td>
                            </ng-container>
            
                            <!-- Hora Fin -->
                            <ng-container matColumnDef="horaFin" >
                                <th mat-header-cell *matHeaderCellDef style="background-color: lightgrey;"> Hora Fin </th>
                                <td mat-cell *matCellDef="let row"> {{ row.horaFin }} </td>
                            </ng-container>
            
                            <!-- Observaciones -->
                            <ng-container matColumnDef="observaciones">
                                <th mat-header-cell *matHeaderCellDef style="background-color: lightgrey;"> Observaciones </th>
                                <td mat-cell *matCellDef="let row"> {{ row.observaciones }} </td>
                            </ng-container>
            
                            <tr mat-header-row *matHeaderRowDef="['fechaInicio', 'horaInicio', 'fechaFin', 'horaFin', 'observaciones']"></tr>
                            <tr mat-row *matRowDef="let row; columns: ['fechaInicio', 'horaInicio', 'fechaFin', 'horaFin', 'observaciones'];"></tr>
                        </table>
                    </div>
                </div>
                <div class="fila8">
                    <mat-form-field appearance="outline">
                        <mat-label>Fecha Inicio</mat-label>
                        <input matInput [matDatepicker]="pickerInicio">
                        <mat-datepicker-toggle matSuffix [for]="pickerInicio"></mat-datepicker-toggle>
                        <mat-datepicker #pickerInicio></mat-datepicker>
                    </mat-form-field>
                    <mat-form-field appearance="outline">
                        <mat-label>Hora Inicio</mat-label>
                        <input matInput type="time">
                    </mat-form-field>
                    <mat-form-field appearance="outline">
                        <mat-label>Fecha Fin</mat-label>
                        <input matInput [matDatepicker]="pickerFin">
                        <mat-datepicker-toggle matSuffix [for]="pickerFin"></mat-datepicker-toggle>
                        <mat-datepicker #pickerFin></mat-datepicker>
                    </mat-form-field>
                    <mat-form-field appearance="outline">
                        <mat-label>Hora Fin</mat-label>
                        <input matInput type="time">
                    </mat-form-field>
                </div>
                <div class="observaciones">
                    <mat-form-field appearance="outline">
                        <mat-label>Observaciones</mat-label>
                        <textarea matInput></textarea>
                    </mat-form-field>
                </div>
            </mat-tab>
        </mat-tab-group>
    </mat-sidenav-content>
</mat-sidenav-container>

